1:HL["/_next/static/css/aa1318ef0ee4993e.css","style",{"crossOrigin":""}]
0:["rxu01j8MmaIhFoY5JXD3k",[[["",{"children":["blog",{"children":["posts",{"children":[["id","%E5%9C%A8JavaScript%E4%B8%AD%EF%BC%8CMath.max()%E5%92%8CMath.min()%E5%9C%A8%E4%B8%8D%E5%A1%AB%E5%85%A5%E5%8F%82%E6%95%B0%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%94%E5%9B%9E-INFINITY%E4%B8%8EINFINITY","d"],{"children":["__PAGE__?{\"id\":\"在JavaScript中，Math.max()和Math.min()在不填入参数的情况下为什么返回-INFINITY与INFINITY\"}",{}]}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/aa1318ef0ee4993e.css","precedence":"next","crossOrigin":""}]],"$L3"]]]]
4:HL["/_next/static/css/8076d60026369b62.css","style",{"crossOrigin":""}]
5:I[2073,["73","static/chunks/73-a3b0d1f29820fe63.js","404","static/chunks/app/blog/page-84354d27cab8d528.js"],""]
6:I[825,[],""]
7:I[8146,["601","static/chunks/app/error-179f34671f819736.js"],""]
8:I[4348,[],""]
b:I[4671,["73","static/chunks/73-a3b0d1f29820fe63.js","692","static/chunks/692-3ecb434c7ce16883.js","185","static/chunks/app/layout-86559e5be3477b7c.js"],"Footer"]
c:I[7701,["73","static/chunks/73-a3b0d1f29820fe63.js","692","static/chunks/692-3ecb434c7ce16883.js","185","static/chunks/app/layout-86559e5be3477b7c.js"],"SakanaWidget"]
2:[null,["$","html",null,{"lang":"en","children":[["$","head",null,{"children":["$","link",null,{"rel":"icon","href":"https://avatars.githubusercontent.com/u/45930107","sizes":"any"}]}],["$","body",null,{"children":["$","div",null,{"className":"flex justify-center","children":["$","div",null,{"className":"relative pc-container flex-1 flex flex-col gap-3 p-3","children":[["$","header",null,{"children":["$","nav",null,{"className":"flex gap-3","children":[["$","$L5",null,{"href":"/","children":["$","button",null,{"className":"\n  rounded-xl px-3 py-2\n  text-xl text-red-900 text-center\n  bg-rose-300 hover:bg-rose-200\n  transition-all\n inline-block w-32","type":"button","tabIndex":-1,"children":"Home"}]}],["$","$L5",null,{"href":"/blog","children":["$","button",null,{"className":"\n  rounded-xl px-3 py-2\n  text-xl text-red-900 text-center\n  bg-rose-300 hover:bg-rose-200\n  transition-all\n inline-block w-32","type":"button","tabIndex":-1,"children":"Blog"}]}]]}]}],["$","main",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$7","errorStyles":[],"errorScripts":[],"template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"initialChildNode":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","initialChildNode":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","posts","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","initialChildNode":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","posts","children",["id","%E5%9C%A8JavaScript%E4%B8%AD%EF%BC%8CMath.max()%E5%92%8CMath.min()%E5%9C%A8%E4%B8%8D%E5%A1%AB%E5%85%A5%E5%8F%82%E6%95%B0%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%94%E5%9B%9E-INFINITY%E4%B8%8EINFINITY","d"],"children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","initialChildNode":["$L9","$La",null],"childPropSegment":"__PAGE__?{\"id\":\"在JavaScript中，Math.max()和Math.min()在不填入参数的情况下为什么返回-INFINITY与INFINITY\"}","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/8076d60026369b62.css","precedence":"next","crossOrigin":""}]]}],"childPropSegment":["id","%E5%9C%A8JavaScript%E4%B8%AD%EF%BC%8CMath.max()%E5%92%8CMath.min()%E5%9C%A8%E4%B8%8D%E5%A1%AB%E5%85%A5%E5%8F%82%E6%95%B0%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%94%E5%9B%9E-INFINITY%E4%B8%8EINFINITY","d"],"styles":null}],"childPropSegment":"posts","styles":null}],"childPropSegment":"blog","styles":null}]}],["$","$Lb",null,{}],["$","aside",null,{"className":"absolute h-full right-full -mt-3 pb-3 hidden xl:flex flex-col-reverse transition-all duration-1000","children":["$","$Lc",null,{"className":"sticky bottom-3 z-10"}]}],["$","aside",null,{"className":"absolute h-full left-full -mt-3 pb-3 hidden xl:flex flex-col-reverse transition-all duration-1000","children":["$","$Lc",null,{"className":"sticky bottom-3 z-10","character":"takina"}]}],["$","div",null,{"className":"relative"}]]}]}]}]]}],null]
3:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"探究在 JavaScript 中，Math.max() 和 Math.min() 在不填入参数的情况下为什么返回 -INFINITY 与 INFINITY - Pink Champagne's blog"}],["$","meta","3",{"property":"og:title","content":"探究在 JavaScript 中，Math.max() 和 Math.min() 在不填入参数的情况下为什么返回 -INFINITY 与 INFINITY"}],["$","meta","4",{"property":"og:description","content":"<p>在一张被广为流传的 JavaScript Meme（梗图）中，我们可以看到这么一个例子，<code>Math.max()</code> 在不填入的参数的情况下返回了 <code>-INFINITY</code>，<code>Math.min()</code> 在同样的情况下返回了 <code>INFINITY</code>。</p>\n"}],["$","meta","5",{"property":"og:locale","content":"zh_CN"}],["$","meta","6",{"property":"og:image","content":"https://avatars.githubusercontent.com/u/45930107"}],["$","meta","7",{"property":"og:type","content":"article"}],["$","meta","8",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","9",{"name":"twitter:title","content":"探究在 JavaScript 中，Math.max() 和 Math.min() 在不填入参数的情况下为什么返回 -INFINITY 与 INFINITY"}],["$","meta","10",{"name":"twitter:description","content":"<p>在一张被广为流传的 JavaScript Meme（梗图）中，我们可以看到这么一个例子，<code>Math.max()</code> 在不填入的参数的情况下返回了 <code>-INFINITY</code>，<code>Math.min()</code> 在同样的情况下返回了 <code>INFINITY</code>。</p>\n"}],["$","meta","11",{"name":"twitter:image","content":"https://avatars.githubusercontent.com/u/45930107"}]]
d:I[5080,["691","static/chunks/691-1fbdf7781fa00ff0.js","978","static/chunks/app/blog/posts/%5Bid%5D/page-3b015998f3b9eee4.js"],"Article"]
e:Tf18,<p>在一张被广为流传的 JavaScript Meme（梗图）中，我们可以看到这么一个例子，<code>Math.max()</code> 在不填入的参数的情况下返回了 <code>-INFINITY</code>，<code>Math.min()</code> 在同样的情况下返回了 <code>INFINITY</code>。</p>
<!-- more -->
<p><img src="/images/posts/covers/js-meme-infinity.jpg" alt="JavaScript Meme"></p>
<p>明明是一个求最大数的方法，却返回了用于表示最小数的 <code>-INFINITY</code>，这让我感觉到有点匪夷所思。</p>
<p>想探寻为什么其实很简单，标准库的代码其实也是人写的，只要去找一下 <code>Math.max()</code> 与 <code>Math.min()</code> 的具体实现方式就能知道了。</p>
<blockquote>
<p>以下文字内容建议配合附加的代码配合观看</p>
</blockquote>
<p>以 <code>Math.max()</code> 为例，在 Chrome 浏览器所使用的 JavaScript 引擎，也就是 V8 引擎的 Math 库的<a href="https://chromium.googlesource.com/v8/v8/+/4.3.21/src/math.js?autodive=0%2F%2F" rel="noreferrer" target="_blank">源码</a>中，我们可以看到当所填入的参数个数<strong>为</strong> <code>2</code> 时，则使用 <code>if</code> 语句既可以实现返回最大值的功能。但当填入的参数个数<strong>不为</strong> <code>2</code> 时，则是使用 <code>for</code> 循环遍历所有的参数，并使用一个变量 <code>r</code> 存储参数中最小的值。而变量 <code>r</code> 的在一开始被赋值为 <code>-INFINITY</code>，如果参数的个数为 <code>0</code> 时，则用于找出最小值的 <code>for</code> 语句块则不会被执行，所以直接返回了 <code>-Infinity</code>。</p>
<p><code>Math.min()</code> 其实也是一个思路，这里就不多讲了。</p>
<pre><code class="language-javascript">// ECMA 262 - 15.8.2.11
function MathMax(arg1, arg2) {  // length == 2
  var length = %_ArgumentsLength();
  // 如果参数的个数为2，直接使用if语句判断结果
  if (length == 2) {
    arg1 = TO_NUMBER_INLINE(arg1);
    arg2 = TO_NUMBER_INLINE(arg2);
    if (arg2 > arg1) return arg2;
    if (arg1 > arg2) return arg1;
    if (arg1 == arg2) {
      // 如果两个参数都为0（如参数填入了0与-0），优先返回-0
      // Make sure -0 is considered less than +0.
      return (arg1 === 0 &#x26;&#x26; %_IsMinusZero(arg1)) ? arg2 : arg1;
    }
    // All comparisons failed, one of the arguments must be NaN.
    return NAN;
  }
  // 如果参数的个数不为2，比如填入了0个、1个甚至多个参数时
  // 通过遍历的方式找出最小值，并用变量r进行存储
  var r = -INFINITY;
  // 如果参数个数为0，这下面的for语句块则不会执行
  for (var i = 0; i &#x3C; length; i++) {
    var n = %_Arguments(i);
    if (!IS_NUMBER(n)) n = NonNumberToNumber(n);
    // Make sure +0 is considered greater than -0.
    if (NUMBER_IS_NAN(n) || n > r || (r === 0 &#x26;&#x26; n === 0 &#x26;&#x26; %_IsMinusZero(r))) {
      r = n;
    }
  }
  return r;
}

// ECMA 262 - 15.8.2.12
function MathMin(arg1, arg2) {  // length == 2
  var length = %_ArgumentsLength();
  if (length == 2) {
    arg1 = TO_NUMBER_INLINE(arg1);
    arg2 = TO_NUMBER_INLINE(arg2);
    if (arg2 > arg1) return arg1;
    if (arg1 > arg2) return arg2;
    if (arg1 == arg2) {
      // Make sure -0 is considered less than +0.
      return (arg1 === 0 &#x26;&#x26; %_IsMinusZero(arg1)) ? arg1 : arg2;
    }
    // All comparisons failed, one of the arguments must be NaN.
    return NAN;
  }
  var r = INFINITY;
  for (var i = 0; i &#x3C; length; i++) {
    var n = %_Arguments(i);
    if (!IS_NUMBER(n)) n = NonNumberToNumber(n);
    // Make sure -0 is considered less than +0.
    if (NUMBER_IS_NAN(n) || n &#x3C; r || (r === 0 &#x26;&#x26; n === 0 &#x26;&#x26; %_IsMinusZero(n))) {
      r = n;
    }
  }
  return r;
}
</code></pre>a:["$","$Ld",null,{"post":{"id":"在JavaScript中，Math.max()和Math.min()在不填入参数的情况下为什么返回-INFINITY与INFINITY","contentHtml":"$e","summary":"<p>在一张被广为流传的 JavaScript Meme（梗图）中，我们可以看到这么一个例子，<code>Math.max()</code> 在不填入的参数的情况下返回了 <code>-INFINITY</code>，<code>Math.min()</code> 在同样的情况下返回了 <code>INFINITY</code>。</p>\n","title":"探究在 JavaScript 中，Math.max() 和 Math.min() 在不填入参数的情况下为什么返回 -INFINITY 与 INFINITY","date":"$D2021-09-29T10:43:00.000Z","updated":"$D2021-09-29T10:43:00.000Z","cover":"/blog-images/js-meme-infinity-cover.jpg","categories":["编程"],"tags":["JavaScript"],"publishedAt":"Wed Sep 29 2021 10:43:00 GMT+0000 (Coordinated Universal Time)","updatedAt":"Wed Sep 29 2021 10:43:00 GMT+0000 (Coordinated Universal Time)"}}]
9:null
